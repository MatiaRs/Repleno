<!DOCTYPE html>
<html lang="es">

<head>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0' y1='0' x2='100%' y2='100%'><stop offset='0%' style='stop-color:%237C3AED;stop-opacity:1' /><stop offset='100%' style='stop-color:%234338CA;stop-opacity:1' /></linearGradient></defs><path d='M20,80 V40 C20,25 30,20 45,20 H70' stroke='url(%23g)' stroke-width='8' fill='none' stroke-linecap='round' stroke-linejoin='round' /><path d='M45,50 H80 V80 H45 Z' stroke='url(%23g)' stroke-width='8' fill='none' stroke-linecap='round' stroke-linejoin='round' /><path d='M55,60 V70' stroke='url(%23g)' stroke-width='6' fill='none' stroke-linecap='round' /><path d='M68,55 V70' stroke='url(%23g)' stroke-width='6' fill='none' stroke-linecap='round' /></svg>">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repleno - Iniciar Sesi√≥n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #F8FAFC; overflow-x: hidden; }
        
        /* Fondo decorativo sutil */
        .bg-pattern {
            position: fixed; inset: 0; z-index: -1;
            background-image: radial-gradient(#E0E7FF 1px, transparent 1px);
            background-size: 24px 24px; opacity: 0.5;
        }

        /* Animaciones */
        .fadeInUp { animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .floating-card {
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            animation: float 6s ease-in-out infinite;
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.08);
        }
        .float-delay-1 { animation-delay: 0s; }
        .float-delay-2 { animation-delay: 3s; }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .btn-primary {
            background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.4); }
        .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; background: #94A3B8; }

        /* Inputs con Padding Extra para Iconos */
        .input-wrapper { position: relative; display: flex; align-items: center; }
        .input-icon { position: absolute; left: 1rem; color: #94A3B8; pointer-events: none; z-index: 10; }
        .styled-input { 
            padding-left: 3.5rem !important; /* Espacio asegurado para el icono */
            transition: all 0.2s; 
        }
        .styled-input:focus { border-color: #6366F1; ring: 2px; ring-color: #E0E7FF; }

        /* Notificaciones */
        .notification { position: fixed; top: 24px; right: 24px; padding: 1rem 1.5rem; border-radius: 1rem; color: white; z-index: 1000; transform: translateX(150%); transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1); box-shadow: 0 10px 30px -5px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 0.75rem; font-weight: 600; }
        .notification.show { transform: translateX(0); }
        .notification.error { background: #EF4444; }
        .notification.success { background: #10B981; }

        /* Modales */
        .modal { transition: opacity 0.2s ease-in-out; }
        .modal-content { transition: transform 0.2s ease-in-out; }
        .modal-hidden { opacity: 0; pointer-events: none; }
        .modal-hidden .modal-content { transform: scale(0.95); }
        .modal-visible { opacity: 1; pointer-events: auto; }
        .modal-visible .modal-content { transform: scale(1); }

        /* Estilos Tarjetas Laterales */
        .side-card {
            transition: transform 0.3s ease;
        }
        .side-card:hover { transform: scale(1.02) translateY(-5px); }
    </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4">
    <div class="bg-pattern"></div>
    <div id="notification-area"></div>

    <!-- Layout Principal: Grid de 3 columnas -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 w-full max-w-7xl items-center relative">
        
        <!-- COLUMNA IZQUIERDA: Beneficios -->
        <div class="hidden lg:flex lg:col-span-4 flex-col gap-6 relative z-0">
            <!-- Tarjeta 1: Gesti√≥n (Azul/√çndigo) -->
            <div class="floating-card side-card p-6 rounded-2xl float-delay-1 transform -rotate-2 hover:rotate-0 bg-gradient-to-br from-blue-50 to-indigo-100 border-indigo-200">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center mb-4 text-2xl shadow-sm text-indigo-600">üöÄ</div>
                <h3 class="font-bold text-indigo-900 text-lg">¬øBuscas control total?</h3>
                <p class="text-indigo-800/80 text-sm mt-2 leading-relaxed">Deja de sufrir con hojas de c√°lculo desordenadas. <b>Centraliza todo tu inventario</b> hoy mismo y recupera tu tranquilidad.</p>
            </div>
            
            <!-- Tarjeta 2: IA (P√∫rpura/Rosa) -->
            <div class="floating-card side-card p-6 rounded-2xl float-delay-2 transform rotate-1 hover:rotate-0 translate-x-4 bg-gradient-to-br from-purple-50 to-fuchsia-100 border-purple-200">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center mb-4 text-2xl shadow-sm text-purple-600">üîÆ</div>
                <h3 class="font-bold text-purple-900 text-lg">Tu Asistente IA 24/7</h3>
                <p class="text-purple-800/80 text-sm mt-2 leading-relaxed">¬øTe gustar√≠a predecir el futuro? Nuestra IA analiza tus datos para decirte <b>qu√© comprar y cu√°ndo</b>. ¬°Vende m√°s sin esfuerzo!</p>
            </div>
        </div>

        <!-- COLUMNA CENTRAL: Login -->
        <div class="col-span-1 lg:col-span-4 w-full relative z-10 fadeInUp">
            <div class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-8 md:p-10 border border-white/50">
                <!-- Logo -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-50 to-white rounded-2xl shadow-md mb-4 border border-indigo-50 transform hover:rotate-3 transition-transform">
                        <svg id="replenoLogoLogin" width="50" height="50" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                            <defs><linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#7C3AED;stop-opacity:1" /><stop offset="100%" style="stop-color:#4338CA;stop-opacity:1" /></linearGradient></defs>
                            <path d="M20,80 V40 C20,25 30,20 45,20 H70" stroke="url(#logoGradient)" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M45,50 H80 V80 H45 Z" stroke="url(#logoGradient)" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M55,60 V70" stroke="url(#logoGradient)" stroke-width="6" fill="none" stroke-linecap="round" />
                            <path d="M68,55 V70" stroke="url(#logoGradient)" stroke-width="6" fill="none" stroke-linecap="round" />
                        </svg>
                    </div>
                    <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Repleno</h1>
                    <p class="text-slate-500 text-sm mt-2 font-medium">Potencia tu negocio hoy</p>
                </div>

                <!-- Formulario -->
                <div class="space-y-5">
                    <div class="space-y-1">
                        <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wider">Correo Electr√≥nico</label>
                        <div class="input-wrapper">
                            <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg>
                            <input type="email" id="email" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white outline-none text-slate-800 font-medium" placeholder="tu@empresa.com" autocomplete="email">
                        </div>
                    </div>
                    
                    <div class="space-y-1">
                        <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wider">Contrase√±a</label>
                        <div class="input-wrapper">
                            <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                            <input type="password" id="password" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white outline-none text-slate-800 font-medium" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <button id="forgot-modal-btn" class="text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:underline transition-colors">¬øOlvidaste tu contrase√±a?</button>
                    </div>

                    <button id="loginBtn" class="btn-primary w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg shadow-indigo-200/50 hover:shadow-indigo-300/50 transform hover:scale-[1.02] transition-transform">
                        Iniciar Sesi√≥n
                    </button>
                </div>

                <div class="mt-8 pt-6 border-t border-slate-100 text-center">
                    <p class="text-slate-500 text-sm font-medium">¬øA√∫n no tienes cuenta? <button id="open-register-btn" class="font-bold text-indigo-600 hover:text-indigo-800 ml-1 transition-colors underline decoration-2 decoration-indigo-200 hover:decoration-indigo-500">Reg√≠strate gratis</button></p>
                </div>
            </div>
        </div>

        <!-- COLUMNA DERECHA: Propuestas de Valor -->
        <div class="hidden lg:flex lg:col-span-4 flex-col gap-6 relative z-0 items-end">
            <!-- Tarjeta 3: Datos (Verde/Esmeralda) -->
            <div class="floating-card side-card p-6 rounded-2xl float-delay-2 transform rotate-2 hover:rotate-0 -translate-x-4 w-72 bg-gradient-to-br from-emerald-50 to-teal-100 border-emerald-200">
                <div class="flex items-center gap-4 mb-3">
                    <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-2xl shadow-sm text-emerald-600">üìä</div>
                    <h3 class="font-bold text-emerald-900 text-lg">Toma Decisiones Reales</h3>
                </div>
                <p class="text-emerald-800/80 text-sm leading-relaxed">No adivines. Visualiza el pulso de tu negocio en tiempo real. <b>Toma el control</b> y haz crecer tus ganancias.</p>
            </div>

            <!-- Tarjeta 4: Eficiencia (Naranja/√Åmbar) -->
            <div class="floating-card side-card p-6 rounded-2xl float-delay-1 transform -rotate-1 hover:rotate-0 w-72 bg-gradient-to-br from-amber-50 to-orange-100 border-orange-200">
                <div class="flex items-center gap-4 mb-3">
                    <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center text-2xl shadow-sm text-orange-500">‚è≥</div>
                    <h3 class="font-bold text-orange-900 text-lg">¬øCansado de perder tiempo?</h3>
                </div>
                <p class="text-orange-900/80 text-sm leading-relaxed">Automatiza lo aburrido y enf√≥cate en lo importante: tus clientes. <b class="block mt-1">¬°Reg√≠strate gratis ahora!</b></p>
            </div>
        </div>

    </div>

    <!-- MODALES -->

    <!-- Modal Registro (REDISE√ëADO Y EST√âTICO) -->
    <div id="register-modal" class="modal modal-hidden fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4" aria-hidden="true">
        <div class="modal-content bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative border border-slate-100">
            
            <!-- Header del Modal -->
            <div class="sticky top-0 bg-white/95 backdrop-blur-md px-8 py-6 border-b border-slate-100 flex justify-between items-center z-10">
                <div>
                    <h2 class="text-2xl font-extrabold text-slate-900">Crear Cuenta</h2>
                    <p class="text-sm text-slate-500 font-medium">√önete a Repleno y haz crecer tu negocio.</p>
                </div>
                <button id="close-register-btn" class="p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="p-8 pt-6">
                <form id="register-form" class="space-y-6">
                    <!-- Grid Nombre/Apellido -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-1.5">
                            <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Nombre</label>
                            <div class="input-wrapper">
                                <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                                <input type="text" id="register-nombre" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="Juan" required>
                            </div>
                        </div>
                        <div class="space-y-1.5">
                            <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Apellido</label>
                            <div class="input-wrapper">
                                <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                                <input type="text" id="register-apellido" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="P√©rez" required>
                            </div>
                        </div>
                    </div>

                    <!-- Grid RUT/Tel√©fono -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div class="space-y-1.5">
                            <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">RUT</label>
                            <div class="input-wrapper">
                                <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0c0 .884-.956 2.999-3 3.5M16 6c0 .884.956 2.999 3 3.5M12 12h.01M12 12v.01M12 12h.01"></path></svg>
                                <input type="text" id="register-rut" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="12.345.678-9" required>
                            </div>
                        </div>
                        <div class="space-y-1.5">
                            <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Tel√©fono</label>
                            <div class="input-wrapper">
                                <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                <input type="tel" id="register-phone" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="+56 9 ..." required>
                            </div>
                        </div>
                    </div>

                    <!-- Negocio -->
                    <div class="space-y-1.5">
                        <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Nombre del Negocio</label>
                        <div class="input-wrapper">
                            <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>
                            <input type="text" id="register-negocio" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="Mi Pyme SpA" required>
                        </div>
                    </div>

                    <!-- Correo -->
                    <div class="space-y-1.5">
                        <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Correo Electr√≥nico</label>
                        <div class="input-wrapper">
                            <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg>
                            <input type="email" id="register-email" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="empresa@mail.com" required>
                        </div>
                    </div>

                    <!-- Contrase√±a -->
                    <div class="space-y-1.5">
                        <label class="text-xs font-bold text-slate-500 uppercase ml-1 tracking-wide">Contrase√±a</label>
                        <div class="input-wrapper">
                            <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                            <input type="password" id="register-password" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50 focus:bg-white font-medium text-slate-800" placeholder="M√≠nimo 6 caracteres" required>
                        </div>
                    </div>

                    <!-- T√©rminos -->
                    <div class="flex items-start space-x-3 pt-2 bg-indigo-50/50 p-4 rounded-xl border border-indigo-50">
                        <input type="checkbox" id="accept-terms" class="mt-1 h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 transition-all" required>
                        <label for="accept-terms" class="text-sm text-slate-600 leading-snug">
                            He le√≠do y acepto los <button type="button" id="open-terms-btn" class="font-bold text-indigo-600 hover:underline">T√©rminos y Condiciones</button> de uso de la plataforma.
                        </label>
                    </div>

                    <button type="submit" id="registerSubmitBtn" class="btn-primary w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg shadow-indigo-200 transition-transform hover:scale-[1.01]">
                        Registrarme Ahora
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Recuperar -->
    <div id="forgot-modal" class="modal modal-hidden fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center z-50 p-4" aria-hidden="true">
        <div class="modal-content bg-white p-8 rounded-3xl shadow-2xl w-full max-w-md text-center">
            <div class="w-16 h-16 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">üîë</div>
            <h2 class="text-2xl font-bold text-slate-800 mb-2">Recuperar Acceso</h2>
            <p class="text-slate-500 mb-6">Te enviaremos un enlace m√°gico a tu correo.</p>
            <form id="forgot-form" class="space-y-4">
                <div class="input-wrapper text-left">
                    <svg class="input-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <input type="email" id="forgot-email" class="styled-input w-full rounded-xl border border-slate-200 p-3.5 bg-slate-50" placeholder="tu@correo.com" required>
                </div>
                <button type="submit" id="send-reset-btn" class="btn-primary w-full py-3 rounded-xl text-white font-bold">Enviar Enlace</button>
                <button type="button" id="close-forgot-btn" class="text-slate-400 hover:text-slate-600 text-sm font-medium mt-2 block mx-auto">Cancelar</button>
            </form>
        </div>
    </div>

    <!-- Modal T√©rminos -->
    <div id="terms-modal" class="modal modal-hidden fixed inset-0 bg-slate-900/70 backdrop-blur-sm flex items-center justify-center z-50 p-4" aria-hidden="true">
        <div class="modal-content bg-white p-8 rounded-3xl shadow-2xl w-full max-w-3xl relative max-h-[80vh] overflow-y-auto">
            <button id="close-terms-btn" class="absolute top-6 right-6 text-slate-400 hover:text-slate-600"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            <h2 class="text-2xl font-bold mb-4 text-slate-800">T√©rminos y Condiciones</h2>
            <div class="text-sm text-slate-600 space-y-4">
                 <p>Bienvenido a Repleno. Al registrarse, usted acepta nuestros t√©rminos de servicio y pol√≠tica de privacidad para el uso de la plataforma.</p>
                 <p class="font-bold text-indigo-600">1. Uso del Servicio</p>
                 <p>La plataforma se proporciona para la gesti√≥n de inventario y ventas. El usuario es responsable de la confidencialidad de su cuenta.</p>
                 <p class="font-bold text-indigo-600">2. Privacidad</p>
                 <p>Tus datos son tuyos. No compartimos informaci√≥n con terceros sin consentimiento.</p>
            </div>
        </div>
    </div>

    <!-- L√ìGICA JAVASCRIPT (Funcionalidad Robusta) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDxfrtCe1RQpFWHewa_kg1WAUmhtifNmI8",
            authDomain: "repleno-app.firebaseapp.com",
            projectId: "repleno-app",
            storageBucket: "repleno-app.firebasestorage.app",
            messagingSenderId: "705634142025",
            appId: "1:705634142025:web:206f1a905f41ad79143c98",
            measurementId: "G-FLTS8BFB46"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        function showNotification(message, type = 'error') {
            const notif = document.createElement('div');
            notif.className = `notification ${type} show`;
            const icon = type === 'success' ? '‚úÖ' : '‚ö†Ô∏è';
            notif.innerHTML = `<span>${icon}</span><span>${message}</span>`;
            document.getElementById('notification-area').appendChild(notif);
            setTimeout(() => { notif.classList.remove('show'); setTimeout(() => notif.remove(), 500); }, 3500);
        }

        function getAbsoluteUrl(filename) {
            const origin = window.location.origin.endsWith('/') ? window.location.origin.slice(0, -1) : window.location.origin;
            const path = filename.startsWith('/') ? filename : `/${filename}`;
            return `${origin}${path}`;
        }

        function showModal(modal) { if(modal) { modal.classList.remove('modal-hidden'); modal.classList.add('modal-visible'); modal.setAttribute('aria-hidden', 'false'); } }
        function hideModal(modal) { if(modal) { modal.classList.add('modal-hidden'); modal.classList.remove('modal-visible'); modal.setAttribute('aria-hidden', 'true'); } }
        function handleModalOverlayClick(e, modal) { if (e.target === modal) hideModal(modal); }
        function raceWithTimeout(promise, ms, errorMessage) { return Promise.race([promise, new Promise((_, reject) => setTimeout(() => reject(new Error(errorMessage)), ms))]); }

        document.addEventListener('DOMContentLoaded', () => sessionStorage.removeItem('loggedInUserId'));

        // LOGIN LOGIC
        async function handleLogin() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            if (!email || !password) return showNotification('Faltan credenciales.');

            const btn = document.getElementById('loginBtn');
            btn.disabled = true; btn.textContent = 'Verificando...';

            try {
                const userCredential = await raceWithTimeout(signInWithEmailAndPassword(auth, email, password), 15000, "Conexi√≥n inestable.");
                const user = userCredential.user;
                const userDocSnap = await raceWithTimeout(getDoc(doc(db, "users", user.uid)), 10000, "Error de datos.");

                if (userDocSnap.exists()) {
                    const userData = userDocSnap.data();
                    sessionStorage.setItem('loggedInUserId', user.uid);
                    if (userData.role === 'admin') window.location.href = getAbsoluteUrl('admin.html');
                    else if (userData.subscriptionStatus !== 'active') window.location.href = getAbsoluteUrl('ejemplo.html');
                    else window.location.href = getAbsoluteUrl('dashboard.html');
                } else {
                    showNotification('Usuario sin datos.');
                    auth.signOut();
                    btn.disabled = false; btn.textContent = 'Iniciar Sesi√≥n';
                }
            } catch (error) {
                let msg = error.message;
                if (error.code === 'auth/invalid-credential' || error.code === 'auth/user-not-found') msg = 'Credenciales incorrectas.';
                showNotification(msg);
                btn.disabled = false; btn.textContent = 'Iniciar Sesi√≥n';
            }
        }

        document.getElementById('loginBtn').addEventListener('click', handleLogin);
        document.getElementById('password').addEventListener('keypress', (e) => { if (e.key === 'Enter') handleLogin(); });

        // REGISTRO LOGIC
        const registerModal = document.getElementById('register-modal');
        document.getElementById('open-register-btn').addEventListener('click', () => showModal(registerModal));
        document.getElementById('close-register-btn').addEventListener('click', () => hideModal(registerModal));
        registerModal.addEventListener('click', (e) => handleModalOverlayClick(e, registerModal));

        document.getElementById('register-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('registerSubmitBtn');
            if (!document.getElementById('accept-terms').checked) return showNotification("Debes aceptar los t√©rminos.");
            
            btn.disabled = true; btn.textContent = 'Creando...';
            
            try {
                const email = document.getElementById('register-email').value.trim();
                const password = document.getElementById('register-password').value;
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                await setDoc(doc(db, "users", user.uid), {
                    rut: document.getElementById('register-rut').value.trim(),
                    nombre: document.getElementById('register-nombre').value.trim(),
                    apellido: document.getElementById('register-apellido').value.trim(),
                    email: email,
                    phone: document.getElementById('register-phone').value.trim(),
                    negocio: document.getElementById('register-negocio').value.trim(),
                    role: 'client', plan: 'none', subscriptionStatus: 'pending'
                });
                showNotification('¬°Bienvenido! Redirigiendo...', 'success');
                sessionStorage.setItem('loggedInUserId', user.uid);
                setTimeout(() => window.location.href = getAbsoluteUrl('ejemplo.html'), 1500);
            } catch (error) {
                let msg = error.message;
                if (error.code === 'auth/email-already-in-use') msg = 'Este correo ya existe.';
                if (error.code === 'auth/weak-password') msg = 'Contrase√±a muy d√©bil.';
                showNotification(msg);
                btn.disabled = false; btn.textContent = 'Registrarme Ahora';
            }
        });

        // MODALES EXTRA
        const forgotModal = document.getElementById('forgot-modal');
        document.getElementById('forgot-modal-btn').addEventListener('click', () => showModal(forgotModal));
        document.getElementById('close-forgot-btn').addEventListener('click', () => hideModal(forgotModal));
        forgotModal.addEventListener('click', (e) => handleModalOverlayClick(e, forgotModal));
        
        document.getElementById('forgot-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('forgot-email').value.trim();
            const btn = document.getElementById('send-reset-btn');
            btn.disabled = true; btn.textContent = 'Enviando...';
            try {
                await raceWithTimeout(sendPasswordResetEmail(auth, email), 10000, "Error conexi√≥n.");
                showNotification('Enlace enviado. Revisa tu correo.', 'success');
                hideModal(forgotModal);
                e.target.reset();
            } catch (error) {
                let msg = 'Error al enviar.';
                if (error.code === 'auth/user-not-found') msg = 'Correo no registrado.';
                showNotification(msg);
            } finally { btn.disabled = false; btn.textContent = 'Enviar Enlace'; }
        });

        const termsModal = document.getElementById('terms-modal');
        document.getElementById('open-terms-btn').addEventListener('click', (e) => { e.preventDefault(); showModal(termsModal); });
        document.getElementById('close-terms-btn').addEventListener('click', () => hideModal(termsModal));
        termsModal.addEventListener('click', (e) => handleModalOverlayClick(e, termsModal));

    </script>
</body>
</html>